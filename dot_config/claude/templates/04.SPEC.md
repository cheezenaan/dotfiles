# 仕様書

<!-- 
  - MUST: セッション内に該当する内容がない項目は無理に埋めないこと
  - MUST: 推測や推察による補完は行わない（ハルシネーション防止）
  - MUST: ユーザーの発言と AI の提案を明確に区別して記録すること
  - MUST: 差分更新時は重複を除去しつつ、ステータス変更は確実に反映すること
-->

## やりたいこと

<!-- 
  目的・ゴール・ユーザーストーリーを記載
  例: 
  - ユーザーが安全にログインできるようにしたい
  - 管理者が全ユーザーのアクティビティを監視できるようにしたい
-->

## 要望・要件

### 機能要件

<!-- ユーザーが求める具体的な機能 -->

### 非機能要件

<!-- パフォーマンス、セキュリティ、可用性などの要件 -->

## 受け入れ条件

<!-- 
  完了判定基準をチェックリスト形式で記載
  例:
  - [ ] ユーザーがメールアドレスとパスワードでログインできる
  - [ ] 5秒以内にログイン処理が完了する
-->

## 制約事項

### 技術的制約

<!-- 使用技術、互換性、既存システムとの連携など -->

### リソース制約

<!-- 時間、予算、人員などの制約 -->

## アーキテクチャ設計

### 決定事項

<!-- 
  ✅ マークを付けて決定済みのアーキテクチャ・技術選定を記載
  例:
  ✅ **アーキテクチャ**: マイクロサービス構成を採用
  ✅ **データベース**: PostgreSQL 14（RDB）を選定
  ✅ **認証基盤**: Auth0 を利用
-->

### 検討中

<!-- 
  🔄 マークを付けて検討中のアーキテクチャ要素を記載
  例:
  🔄 **メッセージング基盤**: RabbitMQ vs Kafka
    - AI 提案: Kafka（スループット重視）
    - ユーザー懸念: 運用の複雑さ
-->

### 却下

<!-- 
  ❌ マークを付けて却下されたアーキテクチャ案を記載（理由も含める）
  例:
  ❌ **サーバーレス構成**: コールドスタート問題により却下
-->

### システム構成図

<!-- セッション内で議論された場合のみ Mermaid で生成 -->

### データフロー図

<!-- セッション内で議論された場合のみ Mermaid で生成 -->

### ER 図

<!-- セッション内で議論された場合のみ Mermaid で生成 -->

## 機能仕様

### 決定事項

<!-- 
  ✅ マークを付けて決定済みの詳細仕様を記載
  例:
  ✅ **認証API**: POST /api/v1/auth/login
  ✅ **users テーブル**: id, email, password_hash, created_at
  ✅ **セッション管理**: JWT トークン（有効期限 24 時間）
-->

### 検討中

<!-- 
  🔄 マークを付けて検討中の実装詳細を記載
  例:
  🔄 **パスワードハッシュアルゴリズム**: bcrypt vs argon2
    - AI 提案: argon2（より安全）
    - ユーザー懸念: ライブラリサポート
-->

### 却下

<!-- 
  ❌ マークを付けて却下された実装案を記載（理由も含める）
  例:
  ❌ **セッションストレージ**: ローカルストレージ使用案（XSS リスクにより却下）
-->

## マイルストーン

<!-- 
  段階的な達成目標を時系列で記載
  例:
  1. **Phase 1**: 基本的な認証機能の実装（2週間）
     - ログイン/ログアウト機能
     - セッション管理
  2. **Phase 2**: 高度な機能の追加（1週間）
     - 二要素認証
     - パスワードリセット
-->